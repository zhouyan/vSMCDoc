<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>vSMC: Program option</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/SVG"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">vSMC
   </div>
   <div id="projectbrief">vSMC: Scalable Monte Carlo</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Program option </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Introduction</h2>
<p>Basic example </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="program__option_8hpp.html">vsmc/utility/program_option.hpp</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">double</span> Value;</div>
<div class="line">    ProgramOptionMap Map;</div>
<div class="line">    Map.add(<span class="stringliteral">&quot;option_name&quot;</span>, <span class="stringliteral">&quot;option description&quot;</span>, &amp;Value);</div>
<div class="line">    Map.process(argc, argv)</div>
<div class="line">    <span class="keywordflow">if</span> (Map.count(<span class="stringliteral">&quot;help&quot;</span>)) <span class="comment">// Option --help are specified</span></div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line"></div>
<div class="line">    std::cout &lt;&lt; Value &lt;&lt; std::endl;</div>
<div class="line">}</div>
</div><!-- fragment --><p> And if on the command line, </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;./prog --option_name 0.5</div>
</div><!-- fragment --><p> This program will produce the output </p><div class="fragment"><div class="line">0.5</div>
</div><!-- fragment --><p> In the source, options are added using <code>ProgramOptionMap::add</code>. The first argument is the option name, say <code>option_name</code>. The second is a description of the option. And the third is an pointer points to the destination of the value. On the command line the option is specified with <code>--option_name</code> followed by values.</p>
<h2>Add options</h2>
<p>The general form of the member function <code>ProgramOptionMap::add</code> is </p><div class="fragment"><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> Dest, <span class="keyword">typename</span> V&gt;</div>
<div class="line">ProgramOptionMap &amp;add (<span class="keyword">const</span> std::string &amp;name, <span class="keyword">const</span> std::string &amp;desc,</div>
<div class="line">Dest *dest, V val);</div>
</div><!-- fragment --><p> where <code>T</code> is the value type of the option. If the fourth (optional) argument is present, it is taken to be the default value of the option. The second template argument, <code>Dest</code> is the type of the destination pointer.</p>
<p>If <code>T</code> is the same as <code>Dest</code>, then the option is a scalar option that can store a single value. Otherwise, <code>Dest</code> is taken to be a container type, e.g., <code>std::vector&lt;T&gt;</code>, and the option can store multiple values. The behavior differs when multiple values are specified in the command line. Therefore, if <code>Dest</code> is a container type and is intended to be used as such, the first template argument needs to be specified explicity. The only exception is when <code>Dest</code> is <code>std::vector&lt;T&gt;</code>, in which case no template argument needs to be specified. The value type <code>T</code> needs to support input stream <code>operator&gt;&gt;</code>. The container type needs to support <code>push_back(T &amp;)</code>, in other words, it needs to be a sequential container.</p>
<p>To summary, the template argument deduction is shown in the following example, </p><div class="fragment"><div class="line"><span class="keywordtype">double</span> sOpt;</div>
<div class="line">std::vector&lt;double&gt; vOpt;</div>
<div class="line">std::list&lt;double&gt; lOpt;</div>
<div class="line"><a class="code" href="classvsmc_1_1_program_option_map.html">vsmc::ProgramOptionMap</a> Map;</div>
<div class="line"></div>
<div class="line">Map.<a class="code" href="classvsmc_1_1_program_option_map.html#a617e623f8f3eed4989f2fb6faecda574">add</a>(<span class="stringliteral">&quot;sName&quot;</span>, <span class="stringliteral">&quot;desc&quot;</span>, &amp;sOpt);        <span class="comment">// OK, single value option. T:</span></div>
<div class="line">double, Dest: <span class="keywordtype">double</span></div>
<div class="line">Map.<a class="code" href="classvsmc_1_1_program_option_map.html#a617e623f8f3eed4989f2fb6faecda574">add</a>(<span class="stringliteral">&quot;vName&quot;</span>, <span class="stringliteral">&quot;desc&quot;</span>, &amp;vOpt);        <span class="comment">// OK, multi-value option.  T:</span></div>
<div class="line">double, Dest: std::vector&lt;double&gt;</div>
<div class="line">Map.<a class="code" href="classvsmc_1_1_program_option_map.html#a617e623f8f3eed4989f2fb6faecda574">add</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;name&quot;</span>, <span class="stringliteral">&quot;desc&quot;</span>, &amp;lOpt); <span class="comment">// OK, multi-value option.  T:</span></div>
<div class="line">double, Dest: std::list&lt;double&gt;</div>
<div class="line">Map.<a class="code" href="classvsmc_1_1_program_option_map.html#a617e623f8f3eed4989f2fb6faecda574">add</a>(<span class="stringliteral">&quot;lName&quot;</span>, <span class="stringliteral">&quot;desc&quot;</span>, &amp;lOpt);        <span class="comment">// Error! T: std::list&lt;double&gt;,</span></div>
<div class="line">Dest: std::list&lt;double&gt;, no <span class="keyword">operator</span>&gt;&gt;</div>
</div><!-- fragment --><h2>Process option</h2>
<p>Options can be processed by calling <code>Map.process(argc, argv)</code>, where <code>argc</code> and <code>argv</code> are the typical arguments of the <code>main</code> function.</p>
<p>After processing, one can use <code>ProgramOptionMap::count</code> to obtain the number of a certain option being specified on the command line. For example, </p><div class="fragment"><div class="line">Map.<a class="code" href="classvsmc_1_1_program_option_map.html#aca4e3872cd87d3f8c40735c33a26bfb2">count</a>(<span class="stringliteral">&quot;name&quot;</span>);</div>
</div><!-- fragment --><h2>Specify options on the command line</h2>
<p>On the command line, each option can be specified multiple times. After each option name, zero or more values can be specified. Multiple values shall be seperated by white spaces. Optionally comma can be added after each value. For example, </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;./prog --sName val               # OK</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;./prog --sName val1 --sName val2 # OK</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;./prog --sName val1 val2         # OK</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;./prog --sName val1, val2        # OK</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;./prog --sName val1,val2         # Error, white space required after comma</div>
</div><!-- fragment --><p>Note that any values specified before the first option are ignored. Any unknown options are also ignored. For example, </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;./prog val1 val2 --sName val --nName val3 # &quot;val1 val2&quot; and &quot;--nName val3&quot;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;ignored</div>
</div><!-- fragment --><h3>Specify an option multiple times,</h3>
<p>If the option is a single value option, it is as if only the last one is used. If the option is a multi-value option, then each of them are processed. Continue the example, </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;./prog --sName val               # sOpt =&gt; val</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;./prog --sName val1 --sName val2 # sOpt =&gt; val2</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;./prog --vName val1 --vName val2 # vOpt =&gt; {val1, val2}</div>
</div><!-- fragment --><h3>Specify multiple values</h3>
<p>After each option, multiple value can be specified. For each value, first trailing white spaces and comma are stripped. Then, if it is a single value option, values are joint into a single string, separated by a single white space, and processed as a single value. If it is a multi-value option, then each value are processed separately, as if they are specified multiple times. For example, </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;./prog --sName val1, val2 # Equivalent to ./prog --sName &quot;val1 val2&quot;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;./prog --vName val1, val2 # Equivalent to ./prog --vName val1 --vName val2</div>
</div><!-- fragment --><p> A more useful example is as the following, </p><div class="fragment"><div class="line">std::uniform_real_distribution&lt;double&gt; runif;</div>
<div class="line">Map.<a class="code" href="classvsmc_1_1_program_option_map.html#a617e623f8f3eed4989f2fb6faecda574">add</a>(<span class="stringliteral">&quot;runif&quot;</span>, <span class="stringliteral">&quot;desc&quot;</span>, &amp;runif);</div>
</div><!-- fragment --> <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;./prog --runif -1, 1        # OK. Uniform distribution on (-1, 1]</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;./prog --runif -1 --runif 1 # Error! uniform_real_distribution operator&gt;&gt;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;requires two values</div>
</div><!-- fragment --><p>If for a multi-value option, each value needs to contain multiple sub values, proper shell quoting is required. For example </p><div class="fragment"><div class="line">std::vector&lt;std::uniform_real_distribution&lt;double&gt; &gt; vrunif;</div>
<div class="line">Map.<a class="code" href="classvsmc_1_1_program_option_map.html#a617e623f8f3eed4989f2fb6faecda574">add</a>(<span class="stringliteral">&quot;vrunif&quot;</span>, <span class="stringliteral">&quot;desc&quot;</span>, &amp;vrunif);</div>
</div><!-- fragment --> <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;./prog --vrunif -1, 1           # Error! Equivalent to ./prog --vrunif -1</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;--vrunif 1</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;./prog --vrunif &quot;-1 1&quot;          # OK.</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;./prog --vrunif &quot;-1 1&quot;, &quot;-2 2&quot;  # OK. vrunif now has two uniform</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;distributions.</div>
</div><!-- fragment --><h2>Boolean options</h2>
<p>If the value type of an option is <code>bool</code>, then it is treated specially. If no values are specified, it is treated as <code>true</code>. For example, </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> Flag;</div>
<div class="line">Map.<a class="code" href="classvsmc_1_1_program_option_map.html#a617e623f8f3eed4989f2fb6faecda574">add</a>(<span class="stringliteral">&quot;flag&quot;</span>, <span class="stringliteral">&quot;desc&quot;</span>, &amp;Flag);</div>
</div><!-- fragment --> <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;./prog --flag # Flag =&gt; true</div>
</div><!-- fragment --><p> If values are specified, then the following are treated as true: non-zero decimal integer values, e.g., <code>1</code>, <code>23</code>. <code>y</code>, <code>Y</code>, <code>yes</code>, <code>Yes</code>, <code>YES</code>, <code>t</code>, <code>T</code>, <code>True</code>, <code>TRUE</code>. The following are treated as false: zero, e.g., <code>0</code>, <code>00</code>, <code>n</code>, <code>N</code>, <code>no</code>, <code>No</code>, <code>NO</code>, <code>f</code>, <code>F</code>, <code>false</code>, <code>False</code>, <code>FALSE</code>. In other words, for values formed entirely of digits, it is treated as an integer and tested as in C/C++; if it is a string, then the common <code>yes</code> and <code>no</code> and their short forms, lower/upper case variants are treated as <code>true</code> and <code>false</code>, respectively. And common boolean literal in programming languages (not only <code>true</code> and <code>false</code> as in C++) are accepted.</p>
<h2>Special option <code>--help</code></h2>
<p>Each option has a description string. If on the command line, the <code>--help</code> option is specified, then help informations will be printed. User does not need to add this option. However, the user can add this option manually to suppress the default printing of help informations. The default <code>--help</code> is a boolean option. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
